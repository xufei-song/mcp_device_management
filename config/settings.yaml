# MCP Test Device Management System Configuration
# Main configuration file for the MCP server and device management

# =============================================================================
# Server Configuration
# =============================================================================
server:
  host: "localhost"
  port: 8000
  workers: 1
  reload: true
  log_level: "INFO"
  
  # CORS settings
  cors:
    origins: ["http://localhost:3000", "http://127.0.0.1:3000"]
    allow_credentials: true
    allow_methods: ["GET", "POST", "PUT", "DELETE", "OPTIONS"]
    allow_headers: ["*"]

# =============================================================================
# Logging Configuration
# =============================================================================
logging:
  level: "INFO"
  format: "detailed"
  file: "logs/mcp_server.log"
  max_size: "10MB"
  backup_count: 5
  
  # Console logging
  console:
    enabled: true
    level: "INFO"
    
  # File logging
  file:
    enabled: true
    level: "DEBUG"
    rotation: "daily"

# =============================================================================
# Device Management Configuration
# =============================================================================
devices:
  # Base device settings
  base:
    discovery_interval: 30  # seconds
    status_update_interval: 60  # seconds
    operation_timeout: 120  # seconds
    max_concurrent: 50
    
  # Android devices
  android:
    enabled: true
    auto_discover: true
    adb_path: "adb"
    device_timeout: 30
    supported_versions: ["8.0", "9.0", "10.0", "11.0", "12.0", "13.0", "14.0"]
    
    # ADB settings
    adb:
      host: "localhost"
      port: 5037
      timeout: 30
      
    # Device operations
    operations:
      install_apk: true
      uninstall_app: true
      clear_data: true
      reboot: true
      screenshot: true
      
  # iOS devices
  ios:
    enabled: true
    auto_discover: true
    libimobiledevice_path: "idevice_id"
    device_timeout: 30
    supported_versions: ["12.0", "13.0", "14.0", "15.0", "16.0", "17.0"]
    
    # libimobiledevice settings
    libimobiledevice:
      timeout: 30
      retry_count: 3
      
    # Device operations
    operations:
      install_ipa: true
      uninstall_app: true
      clear_data: true
      reboot: true
      screenshot: true
      
  # Windows devices
  windows:
    enabled: true
    auto_discover: false
    winrm_port: 5985
    device_timeout: 30
    supported_versions: ["10", "11"]
    
    # WinRM settings
    winrm:
      port: 5985
      timeout: 30
      retry_count: 3
      
    # Device operations
    operations:
      install_msi: true
      uninstall_app: true
      clear_data: true
      reboot: true
      screenshot: true

# =============================================================================
# File Transfer Configuration
# =============================================================================
file_transfer:
  upload:
    max_size: "100MB"
    allowed_extensions: [".apk", ".ipa", ".msi", ".exe", ".zip", ".txt", ".log"]
    chunk_size: 8192
    
  download:
    max_size: "100MB"
    chunk_size: 8192
    
  temp:
    cleanup_interval: 3600  # seconds
    max_age: 86400  # seconds

# =============================================================================
# Database Configuration
# =============================================================================
database:
  type: "file"  # file, sqlite, postgresql
  path: "data/devices.db"
  
  # SQLite specific settings
  sqlite:
    timeout: 30
    check_same_thread: false
    
  # Backup settings
  backup:
    enabled: true
    interval: 86400  # seconds
    retention_days: 30
    path: "backups/"

# =============================================================================
# WebSocket Configuration
# =============================================================================
websocket:
  enabled: true
  heartbeat_interval: 30  # seconds
  connection_timeout: 300  # seconds
  max_connections: 100
  
  # Event types
  events:
    device_connected: true
    device_disconnected: true
    device_status_changed: true
    device_borrowed: true
    device_returned: true
    device_error: true

# =============================================================================
# Security Configuration
# =============================================================================
security:
  # Rate limiting
  rate_limit:
    enabled: true
    requests: 100
    window: 60  # seconds
    
  # Session management
  session:
    timeout: 1800  # seconds
    max_sessions: 100
    
  # API keys (if needed later)
  api_keys:
    enabled: false
    required: false

# =============================================================================
# Monitoring and Metrics
# =============================================================================
monitoring:
  enabled: true
  metrics_port: 9090
  
  # Health checks
  health_check:
    enabled: true
    interval: 30  # seconds
    
  # Performance monitoring
  performance:
    enabled: true
    collect_metrics: true
    alert_threshold: 80  # percentage

# =============================================================================
# Notification Configuration
# =============================================================================
notifications:
  email:
    enabled: false
    smtp_server: "smtp.gmail.com"
    smtp_port: 587
    username: ""
    password: ""
    
  # Webhook notifications
  webhook:
    enabled: false
    url: ""
    timeout: 30
    
  # Slack notifications (if needed)
  slack:
    enabled: false
    webhook_url: ""
    channel: "#device-management"

# =============================================================================
# Development Configuration
# =============================================================================
development:
  debug_mode: true
  show_sql_queries: false
  enable_hot_reload: true
  
  # Testing
  testing:
    enabled: true
    mock_devices: true
    test_data_path: "tests/test_data/"
    
  # Development tools
  tools:
    enable_swagger: true
    enable_reload: true
    enable_debugger: true

# =============================================================================
# Paths and Directories
# =============================================================================
paths:
  base: "."
  devices: "Devices"
  logs: "logs"
  data: "data"
  uploads: "uploads"
  downloads: "downloads"
  backups: "backups"
  temp: "temp"
  
  # Device type directories
  android: "Devices/Android"
  ios: "Devices/IOS"
  windows: "Devices/Windows"
  
  # Configuration files
  config: "config"
  templates: "templates"
  static: "static"

# =============================================================================
# Environment-specific overrides
# =============================================================================
environments:
  development:
    server:
      reload: true
      log_level: "DEBUG"
    logging:
      level: "DEBUG"
      console:
        level: "DEBUG"
        
  production:
    server:
      reload: false
      workers: 4
      log_level: "WARNING"
    logging:
      level: "WARNING"
      console:
        level: "WARNING"
    monitoring:
      enabled: true
    notifications:
      email:
        enabled: true
